!function(){function e(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}{var t=Backbone.Model.extend({}),i=Backbone.Model.extend({initialize:function(){this.convert_for_display("total_contributions"),this.convert_for_display("total_expenditures"),this.convert_for_display("cash_on_hand"),this.convert_for_display("outstanding_loans")},convert_for_display:function(t){this.set(t,e(parseFloat(this.get(t)).toFixed(0)))}}),n=Backbone.Model.extend({initialize:function(){var t=this.get("amt");this.set("amt",e(parseFloat(t).toFixed(0)))}}),o=n.extend({}),l=n.extend({}),a=n.extend({}),s=n.extend({}),r=n.extend({}),c=Backbone.Model.extend({urlRoot:"//tx-tecreports.herokuapp.com/api/v1/report/",url:function(){var e=_.result(this,"urlRoot");return e+encodeURIComponent(this.id)+"/?callback=?"},parse:function(e){return e._meta=new i(e._meta),e.contribs_by_state=new p(e.contribs_by_state),e.top_contribs_by_zip=new b(e.top_contribs_by_zip),e.contribs_by_date=new u(e.contribs_by_date),e.top_ten_donations=new f(e.top_ten_donations),e.buckets=new v(e.buckets),e},fetchFiler:function(e){this.set({id:e},{silent:!0}),this.fetch()}}),d=new c,h=Backbone.Collection.extend({model:t,url:"data/filers.json",comparator:"filer_name"}),m=new h,p=Backbone.Collection.extend({model:o,comparator:"-amt"}),u=Backbone.Collection.extend({model:l}),b=Backbone.Collection.extend({model:a,comparator:"-amt"}),f=Backbone.Collection.extend({model:s,comparator:"-amt"}),v=Backbone.Collection.extend({model:r}),w=Backbone.View.extend({tagName:"div",template:_.template('<option value="<%= report_id %>"><%= display_name %> (<%= party %>) - <%= race %></option>'),render:function(){return this.$el.html(this.template(this.model.toJSON())),this}}),x=Backbone.View.extend({el:"#filer-select-view",events:{change:"triggerLoad"},initialize:function(e){this.activeFiler=e.activeFiler,this.listenTo(this.collection,"reset",this.render)},render:function(){var e=[];this.collection.each(function(t){var i=new w({model:t});e.push(i.render().el.childNodes[0])}),this.$el.append(e)},triggerLoad:function(){var e=this.$el.val();this.activeFiler.fetchFiler(e)}}),k=Backbone.View.extend({el:"#meta-view",template:_.template($("#meta-view-template").html()),initialize:function(){this.listenTo(this.model,"change:_meta",this.render)},render:function(){return this.$el.html(this.template(this.model.get("_meta").toJSON())),this}}),g=Backbone.View.extend({el:"#state-contributions-view",template:_.template($("#state-contributions-view-template").html()),initialize:function(){this.listenTo(this.model,"change:contribs_by_state",this.render)},render:function(){var e=this,t="";this.model.get("contribs_by_state").each(function(i){t+=e.template(i.toJSON())}),this.$el.html(t)}}),y=Backbone.View.extend({el:"#zip-contributions-view",template:_.template($("#zip-contributions-view-template").html()),initialize:function(){this.listenTo(this.model,"change:top_contribs_by_zip",this.render)},render:function(){var e=this,t="";this.model.get("top_contribs_by_zip").each(function(i){t+=e.template(i.toJSON())}),this.$el.html(t)}}),B=Backbone.View.extend({el:"#date-contributions-view",template:_.template($("#date-contributions-view-template").html()),initialize:function(){this.listenTo(this.model,"change:contribs_by_date",this.render)},render:function(){var e=this,t="";this.model.get("contribs_by_date").each(function(i){t+=e.template(i.toJSON())}),this.$el.html(t)}}),z=Backbone.View.extend({el:"#top-donors-view",template:_.template($("#top-donors-view-template").html()),initialize:function(){this.listenTo(this.model,"change:top_ten_donations",this.render)},render:function(){var e=this,t="";this.model.get("top_ten_donations").each(function(i){t+=e.template(i.toJSON())}),this.$el.html(t)}});Backbone.View.extend({el:"#bucket-contributions-view",template:_.template($("#contrib-buckets-view-template").html()),initialize:function(){this.listenTo(this.model,"change:buckets",this.render)},render:function(){var e=this,t="";this.model.get("buckets").each(function(i){t+=e.template(i.toJSON())}),this.$el.html(t)}})}new x({collection:m,activeFiler:d}),new k({model:d}),new g({model:d}),new y({model:d}),new B({model:d}),new z({model:d}),m.fetch({reset:!0})}();